# 1. Smart Contract Guide

This guide details how to interact with the CrowdFUNding smart contracts using the provided Makefile.

## Prerequisites

Ensure you have **Foundry** installed.

## Environment Setup

Create a `.env` file in the root directory with the following variables:

```env
# RPC URL for Base Sepolia network
BASE_RPC_URL=your_base_sepolia_rpc_url

# Etherscan API key for contract verification
ETHERSCAN_API_KEY=your_etherscan_api_key

# Private key for local Anvil deployment (mock - safe for testing)
LOCAL_PRIVATE_KEY=0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80

# Private key for deploying to Base Sepolia (use your actual wallet key)
PRIVATE_KEY=your_private_key
```

### üîë How to Retrieve Environment Keys

| Variable            | How to Get                                                                                                                          |
| ------------------- | ----------------------------------------------------------------------------------------------------------------------------------- |
| `BASE_RPC_URL`      | Sign up at [Alchemy](https://alchemy.com) or [Infura](https://infura.io) and create a Base Sepolia app. Copy the HTTP endpoint URL. |
| `ETHERSCAN_API_KEY` | Register at [Basescan](https://basescan.org) ‚Üí Go to API Keys ‚Üí Create a new API key                                                |
| `LOCAL_PRIVATE_KEY` | This is the default Anvil Account #0 private key. Safe for local testing only!                                                      |
| `PRIVATE_KEY`       | Export from your wallet (MetaMask: Account Details ‚Üí Export Private Key). **Never share this!**                                     |

> ‚ö†Ô∏è **Security Warning**: Never commit your `.env` file or share your private keys. Add `.env` to your `.gitignore`.

## Makefile Commands

We use a `Makefile` to simplify complex Foundry commands into short, memorable scripts.

### 1. Local Development (Anvil)

Use these commands when running a local blockchain node for rapid testing.

- **Start Local Node**

  ```bash
  anvil
  ```

  _Runs in a separate terminal._

- **Dry Run (Simulation)**

  ```bash
  make local-dry
  ```

  _Simulates the deployment script against your local node to check for errors without broadcasting._

- **Deploy to Local**
  ```bash
  make local-deploy
  ```
  _Actually deploys the contracts to your local Anvil node using the `LOCAL_PRIVATE_KEY` (Account #0)._

### 2. Base Sepolia (Testnet)

Use these commands when you are ready to ship to the public testnet.

- **Dry Run (Simulation)**

  ```bash
  make base-dry
  ```

  _Forks the Base Sepolia state and simulates deployment. Good for checking gas costs and script logic._

- **Deploy**

  ```bash
  make base-deploy
  ```

  _Deploys contracts to Base Sepolia using your real `PRIVATE_KEY` from `.env`._

- **Deploy & Verify (Recommended)**
  ```bash
  make base-deploy-verify
  ```
  _Deploys contracts AND verifies the source code on Basescan. This requires `ETHERSCAN_API_KEY` in your `.env`._

## Minting Mock Tokens

Since we are on Testnet, we use Mock Tokens (IDRX, USDC). You can mint them using `cast`:

**Mint Mock IDRX (1000 IDRX):**

```bash
cast send <MOCK_IDRX_ADDR> "mint(address,uint256)" <YOUR_WALLET> 100000 --rpc-url $BASE_RPC_URL --private-key $PRIVATE_KEY
```

**Mint Mock USDC (1000 USDC):**

```bash
cast send <MOCK_USDC_ADDR> "mint(address,uint256)" <YOUR_WALLET> 1000000000 --rpc-url $BASE_RPC_URL --private-key $PRIVATE_KEY
```
